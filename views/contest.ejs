<% include header %>
    
    
    <style>
    body {
  -webkit-user-select: none;
     -moz-user-select: -moz-none;
      -ms-user-select: none;
          user-select: none;
}
    .sidebar{
    position: fixed;
    border-radius: 15px;
    width: 250px;
    top:320px;
    height: 350px;
    bottom: 0;
    left: 20px;
    z-index: 1000;
    display: block;
    padding: 20px;
    overflow-x: hidden;
    overflow-y: auto; /* Scrollable contents if viewport is shorter than content. */
    
    border: 1px solid #eee;
}
.nav-sidebar {
  margin-right: -21px; /* 20px padding + 1px border */
  margin-bottom: 20px;
  margin-left: -20px;

}
.nav-sidebar > li > a {
  padding-right: 20px;
  padding-left: 20px;

}

.nav-sidebar > li > a:hover{
  padding-right: 20px;
  padding-left: 20px;
  color: grey;
}


.nav-sidebar > .active > a {
  color: #fff;
  background-color: #428bca;
}
.Tick1{
    color :red;
    position:relative;
    left:30px;
}
.Tick{
    color: green;
    position: relative;
    left: 30px;
}

.Flag{
    color: red;
    position: relative;
    left: 50px;
    visibility:hidden;
}
</style>
    <div style="position:absolute;left:520px;top:75px">
        <h2><u><%= contest_name %></h2>
    </div>

    <div class="col-sm-4" style="position:fixed;top:300px;left:1px;width:300px">
        <div class="sidebar" id="sidebar_questions1">
            <ul class="nav nav-sidebar">
                <% for(var i = 1; i <= question.length; i++) { %>
                <li id="s1_1">
                    <a id="<%= i + 'L' %>" href="#">Question <%= i %>
                    <span id="<%='s' + i + '_t' + i%>" class="glyphicon glyphicon-record Tick1"></span>
                    <span id="<%='s' + i + '_f' + i%>" class="glyphicon glyphicon-flag Flag"></span></a>
                </li>

                <% } %>
                
    
            </ul>
            
        </div>

    </div>

    <div class="alert alert-danger" style="position:absolute;top:80px;left:900px;width:300px;display:block" id = "tab">
      <button type="button" class="close" data-dismiss="alert" onClick = "closee()">Ã—</button>
      <center><p id = "notification">Number of Questions : 25</p></center></div>
    <form method = "post" action = "/submitContest" id = "contest">
    <div style="position:absolute;left:480px;top:170px;width:700px" id = "main">
    <% for(var i = 0; i < question.length; i++){ %>
    
            <div id="<%=i+1+'Q'%>">
            <h4>Q<%=i + 1 %>.<br><br><p style = "text-wrap:normal;" id="<%=i+1+'QD'%>"><%- question[i]["ques"]%><p></h4><br>
            A.&nbsp&nbsp<input type="radio" name= "<%=i + 1 %>" id = "<%= i + 'R' %>"  value="A">&nbsp&nbsp<%- question[i]["op1"]%><br><br>
            B.&nbsp&nbsp<input type="radio" name= "<%=i + 1 %>" id = "<%= i + 'R' %>" value="B">&nbsp&nbsp<%- question[i]["op2"]%><br><br>
            C.&nbsp&nbsp<input type="radio" name= "<%=i + 1 %>" id = "<%= i + 'R' %>" value="C">&nbsp&nbsp<%- question[i]["op3"]%><br><br>
            D.&nbsp&nbsp<input type="radio" name= "<%=i + 1 %>" id = "<%= i + 'R' %>" value="D">&nbsp&nbsp<%- question[i]["op4"]%><br><br>   
            <button type = "button" id="<%= i +1 + 'C' %>" class="btn btn-success btn-sm" >Clear</button>&nbsp;&nbsp;&nbsp;&nbsp;
                    <button type = "button" id="<%= i + 1 + 'F'%>"  class="btn btn-danger btn-sm" >Flag</button>
        <hr>
        </div>
        
        
    
    <% } %>
    </div>
    
    <% if(complete == 0 && time > 0){ %>
    
    <input type = "submit" value = "Submit" class="btn btn-lg btn-success" style="position:fixed;top:260px;left:90px">
    </form>
    <button type = "button" id = "save" class = "btn btn-lg btn-success" style="position:fixed;top:200px;left:150px">Save Test</button>
    <button type = "button" id = "fallback" class = "btn btn-lg btn-success" style="position:fixed;top:200px;left:10px">Last Saved</button>
    <% }%>
   
     

    <div class="panel panel-info" style="position:fixed;left:1px;top:100px;width:300px">
            <div class="panel-heading" align="center">
              <h3 class="panel-title">Time Remaining</h3>
            </div>
            <div class="panel-body" align="center" id = "timer">
              
            </div>
    </div>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header" style = "background-color:#91E9FF">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 align = "center" class="modal-title" id="myModalLabel"><b>Notification!</h4>
      </div>
      <div class="modal-body">
            <h3 align = "center"><p id = "notifier"><b>Reload</b> Page if <b>Timer</b> does not work.</b><br><br> Use <b> Save Test </b> to avoid data loss. <br> <br> Submit Test only when you are done.<br><br> There is negative marking in this contest! (+3, -1)</p></h3>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        
      </div>
    </div>
  </div>
</div>
    </body>

    
    <script src="/socket.io/socket.io.js"></script>
    <script src = "/js/jquery.min.js"></script>
    <script src = "/js/jquery-scrollto.js"></script>
    <script src = "/js/sample.js"></script>
    <script src = "/js/bootstrap.min.js"></script>

    
    <script type = "text/javascript">    
    $('#myModal').modal({
  keyboard: false
})
$(document).bind('contextmenu', function (e) {
  e.preventDefault();
  alert('Right Click is not allowed');
});
    var c = parseInt(<%= time %>);
    var finish = c + new Date().getTime();

    if(c < 0)
        flag = 0;
    else{
        flag = 1;        
    }
    GetCount(c);
    function GetCount(amount){

        if(amount < 0){          
            document.getElementById("timer").innerHTML = "Contest Finished";
            if(flag){
                flag = 0;
                document.forms["contest"].submit();

            }
        }

  
  else{
    var amount = finish - new Date().getTime();
    days = 0;hours = 0;mins = 0;secs = 0;out = "";
    currd = 0; currhr = 0; currmin = 0; currsec = 0; currt = "";
    amount = Math.floor(amount/1000);
    days=Math.floor(amount/86400);
    amount %= 86400;
          
    hours = Math.floor(amount/3600);
    amount %= 3600;
          
    mins = Math.floor(amount/60);
    amount %= 60;
          
    secs=Math.floor(amount);
          
    if(days != 0){out += days +" day"+((days!=1)?"s":"")+": ";}
    if(days != 0 || hours != 0){out += hours +" hr"+((hours!=1)?"s":"")+": ";}
    if(days != 0 || hours != 0 || mins != 0){out += mins +" min"+((mins!=1)?"":"")+": ";}
    out += secs +" sec";

    
    document.getElementById("timer").innerHTML =  out ;        
    
    
    setTimeout("GetCount("+amount+")", 1000);
  }
}
function closee(){
      document.getElementById('tab').style.display = 'none';
    }
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52998190-1', 'auto');
  ga('send', 'pageview');

</script>
    
</html>
